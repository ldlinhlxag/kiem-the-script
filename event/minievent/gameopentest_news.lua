--公测活动帮助锦囊
--孙多良
--2008.10.10
if (not MODULE_GC_SERVER) then
	return
end
Require("\\script\\event\\minievent\\gameopentest_time.lua")

local tbGameOpenTest = SpecialEvent.GameOpenTest;

tbGameOpenTest.HelpSprite = 
{
	{
		nType 	= 1,
		nKey    = 7,
		szTitle	= "庆祝烟花活动",
		szMsg	= [[
活动时间：%s

活动内容：为了庆祝《剑侠世界》进入公测，在活动期间，所有野外地图怪都会掉落道具“<color=yellow>公测庆祝烟花<color>”，玩家得到并使用 “<color=yellow>公测庆祝烟花<color>” 后可以获得丰厚奖励。每个烟花可以使用5次，但一个人只能使用一次，每天每人最多使用5个烟花。各位亲爱的玩家，喊上你们的朋友，一起使用烟花庆祝这个盛典吧。

活动奖励：<color=yellow>经验、绑定金币、绑定银两<color>
]],c
	},
	{
		nType 	= 2,
		nKey    = 8,
		szTitle	= "开心财宝兔",
		szMsg	= [[
活动时间：%s

活动内容：为了庆祝《剑侠世界》进入公测，在活动间，在野外地图点燃篝火的时候，有一定几率出现一只带有巨额银两的“<color=yellow>财宝兔<color>”。亲爱的玩家们，在你们捉住它的时候，会获得它的钱袋，里面说不定有丰厚的奖励。不过要当心，这个家伙胆子很小的，所以一定要眼疾手快哦。

活动奖励：<color=yellow>绑定银两、铜箱子、银箱子、金箱子。<color>
]],
	},
	{
		nType 	= 3,
		nKey    = 9,
		szTitle	= "充值送礼",
		szMsg	= [[
活动时间：%s

活动内容：为了庆祝《剑侠世界》进入公测，答谢广大玩家对我们的支持，特此举办“<color=yellow>你充值，我送礼<color>”活动。只要您在活动期间当月充值累计达到指定数额，就可以在各个新手村中的活动推广员处领取丰厚礼品<color=red>（请务必在下月1日0：00之前领取，如果超过这个时间，您将领取不到奖励）<color>。心动了吗？那就赶快行动起来吧！

活动奖励：<color=yellow>

  充值达到48元	
    黄金庆贺令
    
  充值达到500元	
    所有充值达到48元的礼品
    的卢（90级）马牌[永久绑定，保质期1年]
    祈福初级令牌[永久绑定，有效期10天]七个
    <color>
]],
	},
	{
		nType 	= 4,
		nKey    = 10,
		szTitle	= "全民大冲级",
		szMsg	= [[
活动时间： <color=yellow>截至时间11月15日0：00点<color>
  
活动内容：为了庆祝《剑侠世界》进入公测，金山联手腾讯为您准备了大量的<color=yellow>QQ秀激活码<color>。在活动期间，<color=green>新开服务器<color>的玩家达到30级，我们就送给您一个<color=yellow>QQ秀激活码<color>。怎么样？心动了吧，那就赶快叫上您的朋友，一起投入到“全民大冲级”的活动中去！当您升到30级的时候，就可以在各个新手村中的<color=yellow>活动推广员<color>处领取一个<color=yellow>QQ秀激活码<color>。数量有限、先到先得，千万别忘了哦。

活动奖励：<color=yellow>QQ秀激活码<color>
]],
	},
}

function tbGameOpenTest:SetOpenTestNews()
	local nTime = GetTime();
	for _, tbParam in pairs(self.HelpSprite) do
		local nAddTime, nEndTime = tbGameOpenTest:GetTime(tbParam.nType);
		if nAddTime > 0 then
			local szAddTime = os.date("%Y-%m-%d %H:%M", nAddTime);
			local szEndTime = os.date("%Y-%m-%d %H:%M", nEndTime);
			local szMsg = string.format("<color=yellow>%s - %s<color>", szAddTime, szEndTime);
			szMsg = string.format(tbParam.szMsg, szMsg);
			Task.tbHelp:SetDynamicNews(tbParam.nKey,  tbParam.szTitle, szMsg, nEndTime, nAddTime);
		end
		local nDate = tonumber(os.date("%Y%m%d%H%M", nTime))
		if tbParam.nType == 4 and nDate >= self.AllStartTime then
			nAddTime = Lib:GetDate2Time(nDate);
			nEndTime = Lib:GetDate2Time(200811150000);
			Task.tbHelp:SetDynamicNews(tbParam.nKey,  tbParam.szTitle, tbParam.szMsg, nEndTime, nAddTime);
		end
	end
end
